<!DOCTYPE html>
<html lang="en">

<head>
  <!-- ## for client-side less
  <link rel="stylesheet/less" type="text/css" href="./theme/css/style.less">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js" type="text/javascript"></script>
  -->
  <link rel="stylesheet" type="text/css" href="./theme/css/style.css">
  <link rel="stylesheet" type="text/css" href="./theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=PT+Sans|PT+Serif|PT+Mono">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Anthony Green">
  <meta name="description" content="Posts and writings by Anthony Green">

  <link href="http://moxielogic.github.io/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="The Moxie Blog Atom" />
  <link href="http://moxielogic.github.io/blog/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="The Moxie Blog RSS" />

<meta name="keywords" content="RTEMS">

  <title>
    The Moxie Blog
&ndash; RTEMS status update  </title>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-72427332-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>

<body>
  <aside>
    <div id="user_meta">
      <a href=".">
        <img src="http://moxielogic.github.io/images/ml.png" alt="logo">
      </a>
      <h2><a href=".">The Moxie Blog</a></h2>
      <p>A development blog for the <b>moxie processor</b>, an open source embedded soft-core processor.</p>
      <ul>
        <li><a href="./pages/about.html">About</a></li>
        <li><a href="./pages/author.html">Author</a></li>
        <li><a href="http://moxielogic.org/blog/pages/architecture.html" target="_blank">Architecture</a></li>
        <li><a href="http://moxielogic.org/blog/pages/toolchain.html" target="_blank">Toolchain</a></li>
      </ul>
    </div>
  </aside>

  <main>
    <header>
      <p>
      <a href=".">Index</a> &brvbar; <a href="./archives.html">Archives</a>
      &brvbar; <a href="http://moxielogic.github.io/blog/feeds/all.atom.xml">Atom</a>
      &brvbar; <a href="http://moxielogic.github.io/blog/feeds/all.rss.xml">RSS</a>
      </p>
    </header>

<article>
  <div class="article_title">
    <h3><a href="./rtems-status-update.html">RTEMS status update</a></h3>
  </div>
  <div class="article_text">
    <p>The <a href="http://www.rtems.com">RTEMS</a> port in <a href="http://www.moxielogic.org/wiki/index.php?title=MoxieDev">moxiedev</a> is looking pretty good right now.
Here's a test of the RTEMS network loopback device running on the moxie
gdb simulator.  The first two client connections fail in this test. 
It's supposed to fail in the first case, but I'm not sure about the
second case.   It's possible that this is just a result of there being
no pre-emptive context switching in the gdb simulator (no timers!).</p>
<div class="highlight"><pre><span class="nv">$ </span>moxie-elf-run loopback.exe
<span class="s2">&quot;Network&quot;</span> initializing!
<span class="s2">&quot;Network&quot;</span> initialized!
Try running client with no server present.
Should fail with <span class="sb">`</span>connection refused<span class="s1">&#39;.</span>
<span class="s1">Connect to server.</span>
<span class="s1">Can&#39;</span>t connect to server: Connection refused
Client closing connection.

Start server.

Try running client with server present.
Connect to server.
Can<span class="err">&#39;</span>t connect to server: Connection refused
Client closing connection.
Client task terminating.
Create socket.
Bind socket.

Try running two clients.
Connect to server.
Connect to server.
ACCEPTED:7F000001
ACCEPTED:7F000001
Write 22-byte message to server.
Write 22-byte message to server.
Read <span class="m">43</span> from server: Server received <span class="m">22</span> <span class="o">(</span>Hi there, server <span class="o">(</span>3<span class="o">)</span>.<span class="o">)</span>
Read <span class="m">43</span> from server: Server received <span class="m">22</span> <span class="o">(</span>Hi there, server <span class="o">(</span>2<span class="o">)</span>.<span class="o">)</span>
Client closing connection.
Client task terminating.
Client closing connection.
Client task terminating.
Worker task terminating.
Worker task terminating.

Try running three clients.
Connect to server.
Connect to server.
Connect to server.
ACCEPTED:7F000001
ACCEPTED:7F000001
ACCEPTED:7F000001
Write 22-byte message to server.
Write 22-byte message to server.
Write 22-byte message to server.
Read <span class="m">43</span> from server: Server received <span class="m">22</span> <span class="o">(</span>Hi there, server <span class="o">(</span>5<span class="o">)</span>.<span class="o">)</span>
Read <span class="m">43</span> from server: Server received <span class="m">22</span> <span class="o">(</span>Hi there, server <span class="o">(</span>6<span class="o">)</span>.<span class="o">)</span>
Read <span class="m">43</span> from server: Server received <span class="m">22</span> <span class="o">(</span>Hi there, server <span class="o">(</span>4<span class="o">)</span>.<span class="o">)</span>
Client closing connection.
Client task terminating.
Client closing connection.
Client task terminating.
Client closing connection.
Client task terminating.
Worker task terminating.
Worker task terminating.
Worker task terminating.
*** END OF LOOPBACK TEST ***
</pre></div>


<p>This really needs to be tested on qemu, but I think it's time to get
back into verilog.</p>
  </div>
  <div class="article_meta">
    <p>Posted on: Wed 15 June 2011</p>
    <p>Category: <a href="./category/moxie.html">moxie</a>
 &ndash; Tags:
      <a href="./tag/rtems.html">RTEMS</a>    </p>
  </div>

  <div id="article_comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_identifier = "rtems-status-update.html";
        (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = 'http://moxieblog.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
         })();
    </script>
  </div>

</article>


    <div id="ending_message">
      <p>&copy; Anthony Green. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>. Theme by Giulio Fidente on <a href="https://github.com/gfidente/pelican-svbhack" target="_blank">github</a>. </p>
    </div>
  </main>
</body>
</html>