<!DOCTYPE html>
<html lang="en">

<head>
  <!-- ## for client-side less
  <link rel="stylesheet/less" type="text/css" href="./theme/css/style.less">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js" type="text/javascript"></script>
  -->
  <link rel="stylesheet" type="text/css" href="./theme/css/style.css">
  <link rel="stylesheet" type="text/css" href="./theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=PT+Sans|PT+Serif|PT+Mono">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Anthony Green">
  <meta name="description" content="Posts and writings by Anthony Green">

  <link href="http://moxielogic.github.io/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="The Moxie Blog Atom" />
  <link href="http://moxielogic.github.io/blog/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="The Moxie Blog RSS" />

<meta name="keywords" content="gcc">

  <title>
    The Moxie Blog
&ndash; An ELF Machine Number for Moxie  </title>

</head>

<body>
  <aside>
    <div id="user_meta">
      <a href=".">
        <img src="http://moxielogic.github.io/images/ml.png" alt="logo">
      </a>
      <h2><a href=".">The Moxie Blog</a></h2>
      <p>A development blog for the <b>moxie processor</b>, an open source embedded soft-core processor.</p>
      <ul>
        <li><a href="./pages/about.html">About</a></li>
        <li><a href="./pages/author.html">Author</a></li>
        <li><a href="http://moxielogic.org/blog/pages/architecture.html" target="_blank">Architecture</a></li>
        <li><a href="http://moxielogic.org/blog/pages/toolchain.html" target="_blank">Toolchain</a></li>
      </ul>
    </div>
  </aside>

  <main>
    <header>
      <p>
      <a href=".">Index</a> &brvbar; <a href="./archives.html">Archives</a>
      &brvbar; <a href="http://moxielogic.github.io/blog/feeds/all.atom.xml">Atom</a>
      &brvbar; <a href="http://moxielogic.github.io/blog/feeds/all.rss.xml">RSS</a>
      </p>
    </header>

<article>
  <div class="article_title">
    <h1><a href="./elf-machine-number.html">An ELF Machine Number for Moxie</a></h1>
  </div>
  <div class="article_text">
    <p>Moxie was assigned an official ELF machine number this week!  You can
check it out here:
<a href="http://www.sco.com/developers/gabi/latest/ch4.eheader.html">http://www.sco.com/developers/gabi/latest/ch4.eheader.html</a>.</p>
<p>All ELF files start with a header describing properties of the object
at hand.  One of the most important properties is the 'machine' type.
The machine type identifies the basic architecture for which the given
binary is relevant.  It is represented as a 16-bit integer, so, for
instance, MIPS is 3, ARM is 40, AVR32 is 185, and now, I'm happy to
say, Moxie is 223.</p>
<p>Linkers, loaders, and similar tools examine the machine number to make
sure they're working with the right kinds of files.  This saves us
from linking SH4 and Sparc objects into x86_64 executables.</p>
<p>Until recently the Moxie GNU binutils port had been using a temporary
machine number of 0xFEED.  Every new architecture, however, should get
an official number assigned by the System V gABI maintainers.  Just
send a nice email requesting the number assignment to registry@sco.com
and they'll increment their most recent number and add you to the
list.</p>
<p>If you look at GNU binutils you'll see that many ports, including
Moxie, live for quite some time using arbitrary machine number values
unlikely to conflict with the slowly incrementing official numbers.
Others, like the FTDI FT32 port, get their numbers (222) assigned in
advance of port submission.  If you go the same route I did, you'll
see that binutils has a mechanism whereby you can identify the main
machine number (223) as well as alternative numbers (0xFEED) to ease
in the transition.  This is all that needed doing:
<a href="https://sourceware.org/ml/binutils/2015-01/msg00105.html">https://sourceware.org/ml/binutils/2015-01/msg00105.html</a>.</p>
<p>Happy Hacking!</p>
  </div>
  <div class="article_meta">
    <p>Posted on: Fri 09 January 2015</p>
    <p>Category: <a href="./category/moxie.html">moxie</a>
 &ndash; Tags:
      <a href="./tag/gcc.html">gcc</a>    </p>
  </div>

  <div id="article_comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_identifier = "elf-machine-number.html";
        (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = '//moxieblog.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
         })();
    </script>
  </div>

</article>


    <div id="ending_message">
      <p>&copy; Anthony Green. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>. Theme by Giulio Fidente on <a href="https://github.com/gfidente/pelican-svbhack" target="_blank">github</a>. </p>
    </div>
  </main>
</body>
</html>