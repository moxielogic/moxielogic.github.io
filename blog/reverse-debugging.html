<!DOCTYPE html>
<html lang="en">

<head>
  <!-- ## for client-side less
  <link rel="stylesheet/less" type="text/css" href="./theme/css/style.less">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js" type="text/javascript"></script>
  -->
  <link rel="stylesheet" type="text/css" href="./theme/css/style.css">
  <link rel="stylesheet" type="text/css" href="./theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=PT+Sans|PT+Serif|PT+Mono">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Anthony Green">
  <meta name="description" content="Posts and writings by Anthony Green">


<meta name="keywords" content="gdb">

  <title>
    The Moxie Blog
&ndash; Reverse debugging!  </title>

</head>

<body>
  <aside>
    <div id="user_meta">
      <a href=".">
        <img src="http://moxielogic.github.io/images/ml.png" alt="logo">
      </a>
      <h2><a href=".">The Moxie Blog</a></h2>
      <p>A development blog for the <b>moxie processor</b>, an open source embedded soft-core processor.</p>
      <ul>
        <li><a href="./pages/about.html">About</a></li>
        <li><a href="./pages/author.html">Author</a></li>
      </ul>
    </div>
  </aside>

  <main>
    <header>
      <p>
      <a href=".">Index</a> &brvbar; <a href="./archives.html">Archives</a>
      </p>
    </header>

<article>
  <div class="article_title">
    <h3><a href="./reverse-debugging.html">Reverse debugging!</a></h3>
  </div>
  <div class="article_text">
    <p>A few weeks ago I happened to be in Palo Alto and met up with my friend
and long-time GDB hacker Michael Snyder. He told me about a new feature
in GDB called "process recording". The basic idea is that when you tell
GDB to enter into "record mode", it records undo information for every
instruction executed during the debug process. This lets you switch
direction and start stepping through your code backwards in time! It's a
pretty amazing feature.</p>
<p>I was anxious to implement it for moxie, but only got around to it this
weekend. The <a href="http://www.moxielogic.org/wiki/index.php?title=Instruction_Set">moxie ISA</a> is relatively small, so it wasn't much work.
The patch looks something like <a href="http://github.com/atgreen/moxiedev/commit/e8940639760db3ae05f01ef205d93d85fb3f4ab1">this</a>. And, as promised, you can now
step forwards and backwards through moxie code. Reverse "continue" and
"finish" also work. It's going to be really handy when I get back to
working the Linux kernel port.</p>
<p>Some GDB front-ends already have the controls in place for reverse
debugging. Here's a webinar <a href="http://live.eclipse.org/node/723">showing reverse debugging on Eclipse</a>. I
mostly use Emacs as my moxie-elf-gdb frontend, but I'm not sure if it
supports the reverse instructions nicely yet (of course you can "set
exec-direction reverse" and use the normal step/next/continue commands).</p>
<p>Thanks to Micheal for pointing me at this new feature, and to Tea Water
for implementing process recording in the first place.</p>
<p><strong>UPDATE:</strong>Emacs support for reverse debugging <a href="http://sourceware.org/ml/gdb/2009-07/msg00094.html">should be arriving in
23.2</a>. I'm not sure what the schedule for that is, but 23.1 is
supposed to come out next week (July 22).</p>
  </div>
  <div class="article_meta">
    <p>Posted on: Sun 12 July 2009</p>
    <p>Category: <a href="./category/moxie.html">moxie</a>
 &ndash; Tags:
      <a href="./tag/gdb.html">gdb</a>    </p>
  </div>


</article>


    <div id="ending_message">
      <p>&copy; Anthony Green. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>. Theme by Giulio Fidente on <a href="https://github.com/gfidente/pelican-svbhack" target="_blank">github</a>. .</p>
    </div>
  </main>
</body>
</html>